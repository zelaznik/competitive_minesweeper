<html>

  <head>
    <!-- For sharing on social media -->
    <meta property="og:type"  content="game" />
    <meta property="og:title" content="Competitive Minesweeper" />
    <meta property="og:url"   content="http://222competitive-minesweeper.herokuapp.com" />
    <meta property="og:image" content="http://competitive-minesweeper.herokuapp.com/images/preview.png" />
    <meta property="fb:app_id" content="1034010236642431" />

    <!-- For pre-fab menubar -->
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Competitive Minesweeper Online</title>

    <!-- Pusher Websocket API -->
    <!-- <script src="//js.pusher.com/3.0/pusher.min.js"></script> -->

    <!-- jQuery + menu bar -->
    <link rel="stylesheet" href="css/menu.css">
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/prepare_menu.js"></script>

    <!-- Minesweeper styling and logic -->
    <link rel="stylesheet" type="text/css" href="css/main.css">

    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/utils.js"></script>
    <script type="text/javascript" src="js/grid.js"></script>
    <script type="text/javascript" src="js/mineField.js"></script>
    <script type="text/javascript" src="js/digital.js"></script>
    <script type="text/javascript" src="js/score.js"></script>
    <script type="text/javascript" src="js/timer.js"></script>
    <script type="text/javascript" src="js/game_base.js"></script>
    <script type="text/javascript" src="js/game_player.js"></script>
    <script type="text/javascript" src="js/game_robot.js"></script>
    <script type="text/javascript" src="js/tiles.js"></script>
    <script type="text/javascript" src="js/view_base.js"></script>
    <script type="text/javascript" src="js/view_competitive.js"></script>
    <script type="text/javascript" src="js/view_player_base.js"></script>
    <script type="text/javascript" src="js/view_player_competitive.js"></script>
    <script type="text/javascript" src="js/view_player_solo.js"></script>
    <script type="text/javascript" src="js/view_robot.js"></script>
    <script type="text/javascript" src="js/prepare.js"></script>
  </head>

  <body>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '1034010236642431',
          xfbml      : true,
          version    : 'v2.5'
        });
      };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script>

    <div id='cssmenu'>
     <ul class="menu-group">
        <li class="level-choice" name="beginner"><a href='#'><span>Beginner</span></a></li>
        <li class="level-choice" name="intermediate"><a href='#'><span>Intermediate</span></a></li>
        <li class="level-choice" name="expert"><a href='#'><span>Expert</span></a></li>
        <li class="level-choice active" name="demo"><a href="#"><span>Demo</span></a></li>
     </ul>

     <ul class="menu-group align-right">
        <li class="level-choice" name="solo"><a href='#'><span>Single Player</span></a></li>
        <li class="level-choice" name="robot"><a href='#'><span>Fight The Robot</span></a></li>
     </ul>

    </div>

    <div id="split-screen" class="split-screen">
      <div id="main" class="game border-convex">
        <div id="aux" class="aux border-concave">
          <canvas class='aux-item score-canvas' id="main-score-canvas"></canvas>
          <canvas class="aux-item faces" id="main-faces-button"></canvas>
          <canvas class='aux-item timer-canvas' id="main-timer-canvas"></canvas>
        </div>
        <canvas class="board border-concave" id="main-board-canvas"></canvas>
      </div>
      <!-- End main -->

      <div id="padding" class="padding"></div>

      <div id="opponent" class="game border-convex">
        <div id="aux" class="aux border-concave">
          <canvas class='aux-item score-canvas' id="opponent-score-canvas"></canvas>
          <canvas class="aux-item faces" id="opponent-faces-button"></canvas>
          <canvas class='aux-item timer-canvas' id="opponent-timer-canvas"></canvas>
        </div>
        <canvas class="board border-concave" id="opponent-board-canvas"></canvas>
      </div>
      <!-- End Opponent -->

    </div> <!-- End Split Screen -->

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        var competitiveMode = true;
        var mainView, opponentView;
        var mainViewType;
        var views = [];

        function getBoard(category) {
          return {
            main: document.getElementById(category),
            canvas: document.getElementById(category + '-board-canvas'),
            resetButton: document.getElementById(category + '-faces-button'),
            timer_canvas: document.getElementById(category + '-timer-canvas'),
            score_canvas: document.getElementById(category + '-score-canvas')
          };
        }

        var defaultViewParams = {
          views: views,
          document: document,
          aux: document.getElementById('aux'),
          menu: document.getElementById('cssmenu'),
          body: document.getElementsByTagName('body')[0]
        };

        if (competitiveMode) {
          opponentView = window.opponentView = prepare(
            merge(defaultViewParams, getBoard('opponent'), {
              viewType: RobotView
            })
          );
        }

        if (competitiveMode) {
          mainViewType = CompetitivePlayerView;
        } else {
          mainViewType = SoloPlayerView;
        }
        // Load your own board.
        mainView = window.mainView = prepare(
          merge(defaultViewParams, getBoard('main'), {
            viewType: mainViewType
          })
        );

        if (competitiveMode) {
          mainView.setOpponentView(opponentView);
          opponentView.setOpponentView(mainView);
          document.getElementById('opponent').classList.remove('hidden');
        } else {
          document.getElementById('opponent').classList.add('hidden');
        }

        respondToButtons({
          document: document,
          views: views
        });

      });
    </script>
  </body>
</html>
